<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=5"> <script> const darkBtn = "Dark"; const lightBtn = "Light"; const isAutoTheme = false; const preferredTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'; if (isAutoTheme) { document.documentElement.setAttribute('data-theme', sessionStorage.getItem('theme') ?? preferredTheme); } else { document.documentElement.setAttribute('data-theme', "dark"); } </script> <script defer src="/chkbit/assets/js/main.min.js"></script><link rel="stylesheet" href="/chkbit/assets/css/main.css"><link rel="shortcut icon" href="/chkbit/assets/favicon.ico" type="image/x-icon"> <script src="/chkbit/assets/js/vendor/simple-jekyll-search.min.js"></script> <script> const cookieName = 'cookie-notice-dismissed-https://laktak.github.io'; const isCookieConsent = 'false'; const analyticsName = ''; const analyticsNameGA4 = ''; </script><meta property="og:image" content="https://laktak.github.io/chkbit/assets/img/none"><meta property="og:type" content="website"/><title>FAQ | chkbit</title><meta name="generator" content="Jekyll v4.3.4"/><meta property="og:title" content="FAQ"/><meta property="og:locale" content="en_US"/><meta name="description" content="Check your files for data corruption and run file deduplication"/><meta property="og:description" content="Check your files for data corruption and run file deduplication"/><link rel="canonical" href="https://laktak.github.io/chkbit/faq/"/><meta property="og:url" content="https://laktak.github.io/chkbit/faq/"/><meta property="og:site_name" content="chkbit"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta property="twitter:title" content="FAQ"/> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Check your files for data corruption and run file deduplication","headline":"FAQ","url":"https://laktak.github.io/chkbit/faq/"}</script><link rel="alternate" type="application/atom+xml" title="chkbit" href="https://laktak.github.io/chkbit/feed.xml"/><link type="application/atom+xml" rel="alternate" href="https://laktak.github.io/chkbit/feed.xml" title="chkbit"/><meta name="twitter:title" content="FAQ"><meta name="twitter:description" content="### Should I run `chkbit` on my whole drive?You would typically run it on your *content* that you want to keep (e.g., your pictures, music, videos).If you wa..."><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://laktak.github.io/chkbit/assets/img/none"><meta name="twitter:image:alt" content="FAQ"><link rel="stylesheet" href="/chkbit/assets/css/custom.css"></head><body> <header class="site-header"><div class="branding"> <a href="/chkbit/"> <img alt="logo img" class="avatar" src="/chkbit/assets/img/logo.png" loading="lazy"/> </a> <a class="site-title" aria-label="chkbit" href="/chkbit/"> chkbit </a></div> <nav class="clear"> <a aria-label="pull" id="pull" class="toggle" href="#"> <i class="fas fa-bars fa-lg"></i> </a><ul class="hide"><li class="separator"> |</li><li> <a class="clear" aria-label="Install" title="Install" href="/chkbit/get/"> <span class="navbar-label">Install</span> </a></li><li class="separator"> |</li><li> <a class="clear" aria-label="How does it work?" title="How does it work?" href="/chkbit/how/"> <span class="navbar-label">How does it work?</span> </a></li><li class="separator"> |</li><li> <a class="clear" aria-label="File Deduplication" title="File Deduplication" href="/chkbit/dedup/"> <span class="navbar-label">Dedup [NEW]</span> </a></li><li class="separator"> |</li><li> <a class="clear" aria-label="Usage" title="Usage" href="/chkbit/usage/"> <span class="navbar-label">Usage</span> </a></li><li class="separator"> |</li><li> <a class="clear" aria-label="FAQ" title="FAQ" href="/chkbit/faq/"> <span class="navbar-label">FAQ</span> </a></li><li class="separator"> |</li><li> <a class="clear" aria-label="About" title="About" href="/chkbit/about/"> <span class="navbar-label">About</span> </a></li><li class="separator"> |</li><li> <a class="clear" aria-label="Star on GitHub" title="Star on GitHub" href="https://github.com/laktak/chkbit"> <span class="navbar-label">Star on GitHub</span> </a></li></ul> </nav> </header><div class="content"> <article > <header id="main" style="background-image:url('')"><div class="title-padder"><h1 id="FAQ" class="title"> FAQ</h1></div> </header> <section class="post-content"><h3 id="should-i-run-chkbit-on-my-whole-drive">Should I run <code class="language-plaintext highlighter-rouge">chkbit</code> on my whole drive?</h3><p>You would typically run it on your <em>content</em> that you want to keep (e.g., your pictures, music, videos).</p><p>If you want to index everything take a look at the atom mode.</p><h3 id="can-i-switch-from-split-to-an-atom-index">Can I switch from split to an atom index?</h3><p>See the <code class="language-plaintext highlighter-rouge">fuse</code> command.</p><p>This is intended to build the atom index that is required for dedup, but if you then delete the <code class="language-plaintext highlighter-rouge">.chkbit</code> files only the atom index is left.</p><h3 id="what-happens-if-i-mix-atom-and-split-indexes">What happens if I mix atom and split indexes?</h3><p>chkbit can only use one index type at a time and will look for split indexes first. So the atom index will be ignored if you have both.</p><h3 id="i-wish-to-use-a-different-hash-algorithm">I wish to use a different hash algorithm</h3><p>chkbit now uses blake3 by default. You can also specify <code class="language-plaintext highlighter-rouge">--algo sha512</code> or <code class="language-plaintext highlighter-rouge">--algo md5</code>.</p><p>Note that existing index files will use the hash that they were created with.</p><h3 id="how-can-i-export-data-from-the-json-files">How can I export data from the JSON files?</h3><p>You can use any tool that supports JSON or even just a text editor.</p><p>For example, if you have <code class="language-plaintext highlighter-rouge">jq</code> installed:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># atom mode, list all files in the index (per folder):
jq '.data | to_entries | map({key: .key, value: (.value.idx | keys)}) | from_entries' .chkbit-db

# atom mode, count all files in the index:
jq '.data.[] | .idx | keys[]' -r .chkbit-db | wc -l


# split mode, list all files in the index (append "| wc -l" to count):
jq '.idx | keys[]' -r .chkbit

# split mode, list all files with their hashes:
jq '.idx | to_entries | map({key: .key, value: (.value.h)}) | from_entries' .chkbit
</code></pre></div></div><p>The chkbit json format itself is very simple:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "v":             version, must be 2
  "idx": {         filename-hash index
    "FILENAME": {  on entry per file
      "mod":       file modification time (unix)
      "a":         hash algorithm
      "h":         hash
      "s":         size (optional, 2025-02-16)
    }
  },
  "idx_hash":      hash of the index itself
  "dirlist": []    list of subdirectories
}
</code></pre></div></div><h3 id="can-i-test-if-chkbit-is-working-correctly">Can I test if chkbit is working correctly?</h3><p>On Linux/macOS, you can try the following.</p><p>Create a directory and initialize it:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mkdir /tmp/test
$ cd /tmp/test
$ chkbit init split .
</code></pre></div></div><p>Create test and set the modified time:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ echo foo1 &gt; test; touch -t 201501010000 test
$ chkbit update .
new test

Processed 1 file
- 0s elapsed
- 1623.70 files/second
- 0.01 MB/second
- 1 directory was updated
- 1 file hash was added
- 0 file hashes were updated
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">new</code> indicates a new file was added.</p><p>Now update test with a new modified:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ echo foo2 &gt; test; touch -t 201501010001 test # update test &amp; modified
$ chkbit update .
upd test

Processed 1 file
- 0s elapsed
- 1487.17 files/second
- 0.01 MB/second
- 1 directory was updated
- 0 file hashes were added
- 1 file hash was updated
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">upd</code> indicates the file was updated.</p><p>Now update test with the same modified to simulate damage:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ echo foo3 &gt; test; touch -t 201501010001 test
$ chkbit update .
DMG test

Processed 1 file
- 0s elapsed
- 0.00 files/second
- 0.01 MB/second
chkbit detected damage in these files:
test
error: detected 1 file with damage!
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">DMG</code> indicates damage.</p> </section><div class="tag-list"></div> </article></div></body></html>